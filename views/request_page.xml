<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="menu_request_credit_form" model="website.menu">
        <field name="name">Demande de Crédit</field>
        <field name="url">/credit-request</field>
        <field name="parent_id" ref="website.main_menu"/>
        <field name="sequence" type="int">1</field>
    </record>
    <template id="create_credit_request" name="Create Request">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="oe_structure">
                    <div class="container">
                        <h3 style="margin: 20px">Bienvenue au portail de Demande de Crédit</h3>
                        <p style="margin: 20px">Veuillez remplir le formulaire pour completez votre demande</p>
                        <t t-if="step == 'step1'">
                            <form role="form" action="/create/request" method="POST" enctype="multipart/form-data"
                                  style="padding: 10px">
                                <input type="hidden" name="opportunity_id"
                                       t-att-value="opportunity_id"/>
                                <input type="hidden" name="step" t-att-value="step"/>
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <div class="form-group col-lg-6" style="padding: 10px">
                                    <label for="partner_name" class="control-label">Nom de la société</label>
                                    <input type="text" name="partner_name" t-att-value="partner_name" id="partner_name"
                                           class="form-control" required="required"/>
                                </div>
                                <div class="form-group col-lg-6" style="padding: 10px">
                                    <label for="street" class="control-label">Adresse du siège social</label>
                                    <input type="text" name="street" t-att-value="street" id="street"
                                           class="form-control"/>
                                </div>
                                <div class="form-group col-lg-6" style="padding: 10px">
                                    <label for="branch" class="control-label">Wilaya du siege sociale</label>
                                    <select name="branch" id="branch" class="form-control link-style">
                                        <t t-foreach="branches" t-as="branch">
                                            <option t-att-value="branch.id">
                                                <t t-esc="branch.name" t-att-value="branch.id"/>
                                            </option>
                                        </t>
                                    </select>
                                </div>
                                <div class="form-group col-lg-6" style="padding: 10px">
                                    <label for="website" class="control-label">Site web</label>
                                    <input type="text" name="website" t-att-value="web_site" id="website"
                                           class="form-control"/>
                                </div>
                                <div class="form-group col-lg-6" style="padding: 10px">
                                    <label for="phone" class="control-label">N. téléphone</label>
                                    <input type="phone" name="phone" t-att-value="phone" id="phone" required="required"
                                           class="form-control"/>
                                </div>
                                <div class="form-group col-lg-6" style="padding: 10px">
                                    <label for="email_from" class="control-label">Adresse mail</label>
                                    <input type="email" name="email_from" t-att-value="email_from" id="email_from"
                                           required="required"
                                           class="form-control"/>
                                </div>
                                <div class="form-group col-lg-6" style="padding: 10px">
                                    <label for="secteur" class="control-label">Secteur d`activité</label>
                                    <select name="secteur" id="secteur" class="form-control link-style"
                                            required="required">
                                        <t t-foreach="secteurs" t-as="secteur">
                                            <option t-att-value="secteur.id">
                                                <t t-esc="secteur.name" t-att-value="secteur.id"/>
                                            </option>
                                        </t>
                                    </select>
                                </div>
                                <div class="form-group col-lg-6" style="padding: 10px">
                                    <label for="activity" class="control-label">Activité en détails</label>
                                    <select name="activity" id="activity" class="form-control link-style"
                                            required="required">
                                        <t t-foreach="activities" t-as="activity">
                                            <option t-att-value="activity.id">
                                                <t t-esc="activity.name" t-att-value="activity.id"/>
                                            </option>
                                        </t>
                                    </select>
                                </div>
                                <div class="form-group col-lg-6" style="padding: 10px">
                                    <label for="demande_type" class="control-label">Type de demande</label>
                                    <select name="demande_type" id="demande_type" class="form-control link-style"
                                            required="required">
                                        <t t-foreach="demandes" t-as="demande">
                                            <option t-att-value="demande[0]">
                                                <t t-esc="demande[1]" t-att-value="demande[0]"/>
                                            </option>
                                        </t>
                                    </select>
                                </div>
                                <div class="clearfix oe_login_buttons">
                                    <button class="btn btn-primary submit pull-left">Suivant</button>
                                </div>
                            </form>
                        </t>
                        <t t-if="step == 'step2'">
                            <style>
                                .radio-container {
                                margin-bottom: 10px;
                                }
                            </style>
                            <form role="form" action="/create/request" method="POST" enctype="multipart/form-data"
                                  style="padding: 10px">
                                <input type="hidden" name="opportunity_id"
                                       t-att-value="opportunity_id"/>
                                <input type="hidden" name="step" t-att-value="step"/>
                                <input type="hidden" name="demande_type" t-att-value="demande_type"/>
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <t t-if="demande_type == '0'">
                                    <div class="form-group col-lg-6" style="padding: 10px">
                                        <label for="has_account" class="control-label">Avez-vous un compte ouvert à
                                            FRANSABANK au nom de la société ?
                                        </label>
                                        <div class="radio-container">
                                            <input type="radio" name="has_account" t-att-value="no" id="has_account_no"
                                                   required="required" checked="checked"/>
                                            <label for="has_account_no">Non</label>
                                        </div>
                                        <div class="radio-container">
                                            <input type="radio" name="has_account" t-att-value="yes"
                                                   id="has_account_yes"
                                                   required="required"/>
                                            <label for="has_account_yes">Oui</label>
                                        </div>
                                    </div>
                                    <div class="form-group col-lg-6" style="padding: 10px;display: none;"
                                         id="rib_group">
                                        <label for="rib" class="control-label">Veuillez inserer le RIB
                                        </label>
                                        <input type="text" name="rib" t-att-value="rib"
                                               id="rib" class="form-control"/>
                                    </div>
                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="company_description" class="control-label">Description de votre
                                            activité
                                        </label>
                                        <br/>
                                        <textarea id="company_description" name="company_description"
                                                  t-att-value="company_description"
                                                  class="comment-box form-group" rows="5"
                                                  style="width: 100%; height: 200px;"
                                                  required="required"/>
                                    </div>
                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="nbr_employees" class="control-label">Nombre de salariés
                                        </label>
                                        <input type="number" name="nbr_employees" t-att-value="nbr_employees"
                                               id="nbr_employees" class="form-control"/>
                                    </div>
                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="date_debut" class="control-label">Date de début d`activité
                                        </label>
                                        <input type="date" name="date_debut" t-att-value="date_debut"
                                               id="date_debut" class="form-control"/>
                                    </div>
                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="has_confrere" class="control-label">Avez-vous des crédit bancaire
                                            auprès des confrères ?
                                        </label>
                                        <div class="radio-container">
                                            <input type="radio" name="has_confrere" value="no" id="has_confrere_no"
                                                   required="required" checked="checked"/>
                                            <label for="has_confrere_no">Non</label>
                                        </div>
                                        <div class="radio-container">
                                            <input type="radio" name="has_confrere" value="yes" id="has_confrere_yes"
                                                   required="required"/>
                                            <label for="has_confrere_yes">Oui</label>
                                        </div>
                                    </div>
                                    <div class="text-end mb-3 confrere" style="display: none;">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                data-bs-target="#createConfrereModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="confrere_ids" t-value="confrere_ids"/>
                                    <table id="confrere_table" class="table confrere" t-if="confrere_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Banque
                                                </th>
                                                <th>
                                                    Type de crédit
                                                </th>
                                                <th>
                                                    Montant
                                                </th>
                                                <th>
                                                    Conditions
                                                </th>
                                                <th>
                                                    Échéance ligne
                                                </th>
                                                <th>
                                                    Garanties
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="confrere">
                                            <t t-foreach="confrere_ids" t-as="confrere_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.banque.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.credit.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.montant"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.condition"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.date_echeance"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.garantie"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                    <form role="form" action="/delete_confrere" method="POST" class="delete-confrere-form" style="display: none;">
                                                        <button type="submit" class="btn btn-secondary" style="display: none;">Modifier</button>
                                                    </form>
                                                    </td>
                                                    <td>
                                                   <form role="form" action="/delete/confrere" method="POST" enctype="multipart/form-data"
                                                        style="padding: 10px">
                                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                        <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                                                        <input type="hidden" name="step" t-att-value="step"/>
                                                        <input type="hidden" name="confrere_id" t-att-value="confrere_id.id"/>
                                                            
                                                        <button type="submit" class="btn btn-secondary" >Supprimer</button>
                                                    </form>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>

                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="has_importation" class="control-label">Faites-vous de l`importation
                                            ?
                                        </label>
                                        <div class="radio-container">
                                            <input type="radio" name="has_importation" value="no"
                                                   id="has_importation_no"
                                                   required="required" checked="checked"/>
                                            <label for="has_importation_no">Non</label>
                                        </div>
                                        <div class="radio-container">
                                            <input type="radio" name="has_importation" value="yes"
                                                   id="has_importation_yes"
                                                   required="required"/>
                                            <label for="has_importation_yes">Oui</label>
                                        </div>
                                    </div>
                                    <div class="text-end mb-3 importation" style="display: none;">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                data-bs-target="#createImportationModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="importation_ids" t-value="importation_ids"/>
                                    <table id="importation_table" class="table importation" t-if="importation_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Fournisseur
                                                </th>
                                                <th>
                                                    Pays
                                                </th>
                                                <th>
                                                    Mode de paiement
                                                </th>
                                                <th>
                                                    Délai de paiement (en jours)
                                                </th>
                                                <th>
                                                    Montant prévisionnel en DA
                                                </th>
                                                <th>
                                                    Programme d'importation
                                                </th>
                                                <th width="30%">
                                                    Délais de livraison (entre le lancement de la commande et le
                                                    dédouanement de la marchandise) en jours
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="importation">
                                            <t t-foreach="importation_ids" t-as="importation_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.fournisseur"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.pays.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <ul>
                                                            <t t-foreach="importation_id.payment" t-as="pay">
                                                                <li>
                                                                    <t t-esc="pay.name"/>
                                                                </li>
                                                            </t>
                                                        </ul>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.delai"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.montant"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.programme_importation"/>
                                                        </span>
                                                    </td>
                                                    <td width="30%">
                                                        <span>
                                                            <t t-esc="importation_id.delai_livraison"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                    <form role="form" action="/delete_confrere" method="POST" class="delete-confrere-form" >
                                                        <button type="submit" class="btn btn-secondary" style="display: none;">Modifier</button>
                                                    </form>
                                                    </td>
                                                    <td>
                                                        <form role="form" action="/delete_importation" method="POST" class="delete-importation-form">
                                                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                            <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                                                            <input type="hidden" name="importation_id" t-att-value="importation_id.id"/>
                                                            <input type="hidden" name="step" t-att-value="step"/>
                                                            <button type="submit" class="btn btn-secondary">Supprimer</button>
                                                        </form></td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>

                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="has_appro" class="control-label">Approvisionnement auprès du marché
                                            local
                                        </label>
                                        <div class="radio-container">
                                            <input type="radio" name="has_appro" value="no"
                                                   id="has_appro_no"
                                                   required="required" checked="checked"/>
                                            <label for="has_appro_no">Non</label>
                                        </div>
                                        <div class="radio-container">
                                            <input type="radio" name="has_appro" value="yes"
                                                   id="has_appro_yes"
                                                   required="required"/>
                                            <label for="has_appro_yes">Oui</label>
                                        </div>
                                    </div>
                                    <div class="text-end mb-3 appro" style="display: none;">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                data-bs-target="#createApproModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="appro_ids" t-value="appro_ids"/>
                                    <table id="appro_table" class="table appro" t-if="appro_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Designation de marchandises / MP
                                                </th>
                                                <th>
                                                    Fournisseur
                                                </th>
                                                <th>
                                                    Mode de paiement
                                                </th>
                                                <th>
                                                    Délai de paiement (en jours)
                                                </th>
                                                <th>
                                                    Montant prévisionnel
                                                </th>
                                                <th>
                                                    Mois prév. De lancement
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="appro">
                                            <t t-foreach="appro_ids" t-as="appro_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.marchandise"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.fournisseur"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <ul>
                                                            <t t-foreach="appro_id.payment" t-as="pay">
                                                                <li>
                                                                    <t t-esc="pay.name"/>
                                                                </li>
                                                            </t>
                                                        </ul>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.delai"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.montant"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.programme_importation"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                    <form role="form" action="/delete_confrere" method="POST" class="delete-confrere-form" style="display: none;">
                                                        <button type="submit" class="btn btn-secondary" style="display: none;">Modifier</button>
                                                    </form>
                                                    </td>
                                                    <td>
                                                    <form role="form" action="/delete_appro" method="POST" class="delete-appro-form">
                                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                        <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                                                        <input type="hidden" name="appro_id" t-att-value="appro_id.id"/>
                                                        <input type="hidden" name="step" t-att-value="step"/>
                                                        <button type="submit" class="btn btn-secondary">Supprimer</button>
                                                    </form>

                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                    <h4>Plan des charges</h4>
                                    <div class="text-end mb-3 plan">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                data-bs-target="#createPlanModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="plan_ids" t-value="plan_ids"/>
                                    <table id="plan_table" class="table" t-if="plan_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Type de marché
                                                </th>
                                                <th>
                                                    Client
                                                </th>
                                                <th>
                                                    Dom. Bancaire
                                                </th>
                                                <th>
                                                    Natissement
                                                </th>
                                                <th>
                                                    Montant H.T DA
                                                </th>
                                                <th>
                                                    Objet du marché
                                                </th>
                                                <th>
                                                    Date ODS
                                                </th>
                                                <th>
                                                    Délai d`excution (en jours)
                                                </th>
                                                <th>
                                                    Taux d`avancement
                                                </th>
                                                <th>
                                                    Montant facturé H.T
                                                </th>
                                                <th>
                                                    Montant encaissé H.T
                                                </th>
                                                <th>
                                                    Montant facturé non-encaissé H.T
                                                </th>
                                                <th>
                                                    Montant réalisé non-facturé H.T
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="plan">
                                            <t t-foreach="plan_ids" t-as="plan_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.type_marche.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.client"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.dom_bancaire.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.natissement"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.objet"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.date_obs"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.delai"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.taux"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant_facture"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant_encaisse"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant_fact_no_encaisse"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant_no_fact_realise"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                    <form role="form" action="/delete_confrere" method="POST" class="delete-confrere-form" style="display: none;">
                                                        <button type="submit" class="btn btn-secondary" style="display: none;">Modifier</button>
                                                    </form>
                                                    </td>
                                                    <td>
                                                        <form role="form" action="/delete_plan" method="POST" class="delete-plan-form">
                                                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                            <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                                                            <input type="hidden" name="plan_id" t-att-value="plan_id.id"/>
                                                            <input type="hidden" name="step" t-att-value="step"/>
                                                            <button type="submit" class="btn btn-secondary">Supprimer</button>
                                                        </form>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                    <h4>Financement sollicité</h4>
                                    <div class="text-end mb-3 fin">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                data-bs-target="#createFinancementModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="financement_ids" t-value="financement_ids"/>
                                    <table id="financement_table" class="table" t-if="financement_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Type de financement
                                                </th>
                                                <th>
                                                    Montant
                                                </th>
                                                <th>
                                                    Utilisation
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="financement">
                                            <t t-foreach="financement_ids" t-as="financement_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="financement_id.type_fin.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="financement_id.montant"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="financement_id.utilisation"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                    <form role="form" action="/delete_confrere" method="POST" class="delete-confrere-form">
                                                        <button type="submit" class="btn btn-secondary" style="display: none;">Modifier</button>
                                                    </form>
                                                    </td>
                                                    <td>
                                                    <form role="form" action="/delete_financement" method="POST" class="delete-financement-form">
                                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                        <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                                                        <input type="hidden" name="financement_id" t-att-value="financement_id.id"/>
                                                        <input type="hidden" name="step" t-att-value="step"/>
                                                        <button type="submit" class="btn btn-secondary">Supprimer</button>
                                                    </form>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="garanties" class="control-label">Garanties proposées
                                        </label>
                                        <br/>
                                        <textarea id="garanties" name="garanties" t-att-value="garanties"
                                                  class="comment-box form-group" rows="5"
                                                  style="width: 100%; height: 200px;"
                                                  />
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="form-group col-lg-6" style="padding: 10px">
                                        <label for="branch" class="control-label">Agence
                                        </label>
                                        <select name="branch" id="branch" class="form-control link-style">
                                            <t t-foreach="branches" t-as="branch">
                                                <option t-att-value="branch.id">
                                                    <t t-esc="branch.name" t-att-value="branch.id"/>
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="num_compte" class="control-label">Numéro de compte
                                        </label>
                                        <input type="text" name="num_compte" t-att-value="num_compte"
                                               id="num_compte" class="form-control"/>
                                    </div>

                                    <h4>Financement sollicité</h4>
                                    <div class="text-end mb-3 fin">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                data-bs-target="#createFinancementRenModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="financement_ids" t-value="financement_ids"/>
                                    <table id="financement_1_table" class="table" t-if="financement_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Type de financement
                                                </th>
                                                <th>
                                                    Autorisation actuelle
                                                </th>
                                                <th>
                                                    Validité de la ligne
                                                </th>
                                                <th>
                                                    Plafond demandé
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="financement">
                                            <t t-foreach="financement_ids" t-as="financement_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="financement_id.type_fin.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="financement_id.autorisation_actuel"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="financement_id.validite"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="financement_id.new_plafond"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="garanties" class="control-label">Garanties proposées
                                        </label>
                                        <br/>
                                        <textarea id="garanties" name="garanties"
                                                  class="comment-box form-group" rows="5"
                                                  style="width: 100%; height: 200px;"
                                                  />
                                    </div>
                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="has_confrere" class="control-label">Avez-vous des crédit bancaire
                                            auprès des confrères ?
                                        </label>
                                        <div class="radio-container">
                                            <input type="radio" name="has_confrere" value="no" id="has_confrere_no"
                                                   required="required" checked="checked"/>
                                            <label for="has_confrere_no">Non</label>
                                        </div>
                                        <div class="radio-container">
                                            <input type="radio" name="has_confrere" value="yes" id="has_confrere_yes"
                                                   required="required"/>
                                            <label for="has_confrere_yes">Oui</label>
                                        </div>
                                    </div>
                                    <div class="text-end mb-3 confrere" style="display: none;">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                id="createconfrere"
                                                data-bs-target="#createConfrereModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="confrere_ids" t-value="confrere_ids"/>
                                    <table id="confrere_table" class="table confrere" t-if="confrere_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Banque
                                                </th>
                                                <th>
                                                    Type de crédit
                                                </th>
                                                <th>
                                                    Montant
                                                </th>
                                                <th>
                                                    Conditions
                                                </th>
                                                <th>
                                                    Échéance ligne
                                                </th>
                                                <th>
                                                    Garanties
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="confrere">
                                            <t t-foreach="confrere_ids" t-as="confrere_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.banque.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.credit.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.montant"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.condition"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.date_echeance"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="confrere_id.garantie"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>

                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="has_importation" class="control-label">Faites-vous de l`importation
                                            ?
                                        </label>
                                        <div class="radio-container">
                                            <input type="radio" name="has_importation" value="no"
                                                   id="has_importation_no"
                                                   required="required" checked="checked"/>
                                            <label for="has_importation_no">Non</label>
                                        </div>
                                        <div class="radio-container">
                                            <input type="radio" name="has_importation" value="yes"
                                                   id="has_importation_yes"
                                                   required="required"/>
                                            <label for="has_importation_yes">Oui</label>
                                        </div>
                                    </div>
                                    <div class="text-end mb-3 importation" style="display: none;">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                data-bs-target="#createImportationModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="importation_ids" t-value="importation_ids"/>
                                    <table id="importation_table" class="table importation" t-if="importation_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Fournisseur
                                                </th>
                                                <th>
                                                    Pays
                                                </th>
                                                <th>
                                                    Mode de paiement
                                                </th>
                                                <th>
                                                    Délai de paiement (en jours)
                                                </th>
                                                <th>
                                                    Montant prévisionnel en DA
                                                </th>
                                                <th>
                                                    Programme d'importation
                                                </th>
                                                <th width="30%">
                                                    Délais de livraison (entre le lancement de la commande et le
                                                    dédouanement de la marchandise) en jours
                                                </th>
                                               <th></th>
                                            </tr>
                                        </thead>
                                        <tbody id="importation">
                                            <t t-foreach="importation_ids" t-as="importation_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.fournisseur"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.pays.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <ul>
                                                            <t t-foreach="importation_id.payment" t-as="pay">
                                                                <li>
                                                                    <t t-esc="pay.name"/>
                                                                </li>
                                                            </t>
                                                        </ul>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.delai"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.montant"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="importation_id.programme_importation"/>
                                                        </span>
                                                    </td>
                                                    <td width="30%">
                                                        <span>
                                                            <t t-esc="importation_id.delai_livraison"/>
                                                        </span>
                                                    </td>
                                                    
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>

                                    <div class="form-group col-lg-6" style="padding: 10px;">
                                        <label for="has_appro" class="control-label">Approvisionnement auprès du marché
                                            local
                                        </label>
                                        <div class="radio-container">
                                            <input type="radio" name="has_appro" value="no"
                                                   id="has_appro_no"
                                                   required="required" checked="checked"/>
                                            <label for="has_appro_no">Non</label>
                                        </div>
                                        <div class="radio-container">
                                            <input type="radio" name="has_appro" value="yes"
                                                   id="has_appro_yes"
                                                   required="required"/>
                                            <label for="has_appro_yes">Oui</label>
                                        </div>
                                    </div>
                                    <div class="text-end mb-3 appro" style="display: none;">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                data-bs-target="#createApproModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="appro_ids" t-value="appro_ids"/>
                                    <table id="appro_table" class="table appro" t-if="appro_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Designation de marchandises / MP
                                                </th>
                                                <th>
                                                    Fournisseur
                                                </th>
                                                <th>
                                                    Mode de paiement
                                                </th>
                                                <th>
                                                    Délai de paiement (en jours)
                                                </th>
                                                <th>
                                                    Montant prévisionnel
                                                </th>
                                                <th>
                                                    Mois prév. De lancement
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="appro">
                                            <t t-foreach="appro_ids" t-as="appro_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.marchandise"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.fournisseur"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <ul>
                                                            <t t-foreach="appro_id.payment" t-as="pay">
                                                                <li>
                                                                    <t t-esc="pay.name"/>
                                                                </li>
                                                            </t>
                                                        </ul>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.delai"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.montant"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="appro_id.programme_importation"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                    <h4>Plan des charges</h4>
                                    <div class="text-end mb-3 plan">
                                        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                data-bs-target="#createPlanModal">Ajouter une ligne
                                        </button>
                                    </div>
                                    <t t-set="plan_ids" t-value="plan_ids"/>
                                    <table id="plan_table" class="table" t-if="plan_ids">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Type de marché
                                                </th>
                                                <th>
                                                    Client
                                                </th>
                                                <th>
                                                    Dom. Bancaire
                                                </th>
                                                <th>
                                                    Natissement
                                                </th>
                                                <th>
                                                    Montant H.T DA
                                                </th>
                                                <th>
                                                    Objet du marché
                                                </th>
                                                <th>
                                                    Date ODS
                                                </th>
                                                <th>
                                                    Délai d`excution (en jours)
                                                </th>
                                                <th>
                                                    Taux d`avancement
                                                </th>
                                                <th>
                                                    Montant facturé H.T
                                                </th>
                                                <th>
                                                    Montant encaissé H.T
                                                </th>
                                                <th>
                                                    Montant facturé non-encaissé H.T
                                                </th>
                                                <th>
                                                    Montant réalisé non-facturé H.T
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody id="plan">
                                            <t t-foreach="plan_ids" t-as="plan_id">
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.type_marche.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.client"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.dom_bancaire.name"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.natissement"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.objet"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.date_obs"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.delai"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.taux"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant_facture"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant_encaisse"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant_fact_no_encaisse"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-esc="plan_id.montant_no_fact_realise"/>
                                                        </span>
                                                    </td>
                                                    <td>
                                                    </td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </t>
                                <div class="clearfix oe_login_buttons">
                                    <button class="btn btn-primary submit pull-left">Suivant</button>
                                </div>
                            </form>
                        </t>
                        <t t-if="step == 'step3'">
                            <form role="form" action="/create/request" method="POST" enctype="multipart/form-data"
                                  style="padding: 10px">
                                <input type="hidden" name="opportunity_id"
                                       t-att-value="opportunity_id"/>
                                <input type="hidden" name="step" t-att-value="step"/>
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                                <t t-set="document_list" t-value="document_list"/>
                                <table id="document_table" class="table">
                                    <thead>
                                        <tr>
                                            <th>
                                                Nom du document
                                            </th>
                                            <th>
                                                Document
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="docs">
                                        <t t-foreach="document_list" t-as="doc">
                                            <tr>
                                                <td>
                                                    <span>
                                                        <t t-esc="doc[1]"/>
                                                    </span>
                                                </td>
                                                <td>
                                                    <input type="file" t-attf-class="form-control form-control-sm"
                                                           t-att-id="'document_' + doc[0]"
                                                           t-att-name="'document_' + doc[0]"
                                                           t-att-value=""/>
                                                </td>
                                                <td>
                                                </td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                                <div class="clearfix oe_login_buttons">
                                    <button class="btn btn-primary submit pull-left">Suivant</button>
                                </div>
                            </form>
                        </t>
                    </div>
                </div>
            </div>
        </t>
        <div class="modal fade" id="createConfrereModal" tabindex="-1" aria-labelledby="createConfrereModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createConfrereModalLabel">Ajouter</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form role="form" action="/create/confrere" method="POST" enctype="multipart/form-data"
                              style="padding: 10px">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                            <input type="hidden" name="step" value="step2"/>
                            <div class="mb-3">
                                <label for="banque">Banque</label>
                                <select name="banque" id="banque" class="form-control link-style">
                                    <t t-foreach="banques" t-as="banque">
                                        <option t-att-value="banque.id">
                                            <t t-esc="banque.name" t-att-value="banque.id"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="credit">Type de crédit</label>
                                <select name="credit" id="credit" class="form-control link-style">
                                    <t t-foreach="credits_type" t-as="credit">
                                        <option t-att-value="credit.id">
                                            <t t-esc="credit.name" t-att-value="credit.id"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="montant">Montant</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="montant" name="montant" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="condition">Conditions</label>
                                <input type="text" t-attf-class="form-control form-control-sm"
                                       id="condition" name="condition"/>
                            </div>
                            <div class="mb-3">
                                <label for="date_echeance">Échéance ligne</label>
                                <input type="date" t-attf-class="form-control form-control-sm"
                                       id="date_echeance" name="date_echeance"/>
                            </div>
                            <div class="mb-3">
                                <label for="garantie">Garanties</label>
                                <input type="text" t-attf-class="form-control form-control-sm"
                                       id="garantie" name="garantie"/>
                            </div>
                            <button type="submit" class="btn btn-secondary">Ajouter</button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <!-- Add any additional buttons or actions here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="createImportationModal" tabindex="-1" aria-labelledby="createImportationModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createImportationModalLabel">Ajouter une ligne</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form role="form" action="/create/importation" method="POST" enctype="multipart/form-data"
                              style="padding: 10px">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                            <input type="hidden" name="step" value="step2"/>
                            <div class="mb-3">
                                <label for="fournisseur">Fournisseur</label>
                                <input type="text" t-attf-class="form-control form-control-sm"
                                       id="fournisseur" name="fournisseur" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="pays">Pays</label>
                                <select name="pays" id="pays" class="form-control link-style">
                                    <t t-foreach="pays_ids" t-as="pays">
                                        <option t-att-value="pays.id">
                                            <t t-esc="pays.name" t-att-value="pays.id"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="payment">Mode de paiement</label>
                                <t t-foreach="payments" t-as="payment">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input"
                                               t-att-id="'payment_' + str(payment.id)"
                                               t-att-name="'payment_' + str(payment.id)"
                                               t-att-value="payment.id"/>
                                        <label class="form-check-label" t-att-for="'payment_' + str(payment.id)">
                                            <t t-esc="payment.name"/>
                                        </label>
                                    </div>
                                </t>
                            </div>
                            <div class="mb-3">
                                <label for="delai">Délai de paiement (en jours)</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="delai" name="delai" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="montant">Montant</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="montant" name="montant" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="programme_importation">Programme d'importation</label>
                                <input type="month" t-attf-class="form-control form-control-sm"
                                       id="programme_importation" name="programme_importation" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="delai_livraison">Délais de livraison (entre le lancement de la commande et
                                    le dédouanement de la marchandise) en jours
                                </label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="delai_livraison" name="delai_livraison" required="required"/>
                            </div>
                            <button type="submit" class="btn btn-secondary">Ajouter</button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <!-- Add any additional buttons or actions here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="createApproModal" tabindex="-1" aria-labelledby="createApproModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createApproModalLabel">Ajouter une ligne</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form role="form" action="/create/appro" method="POST" enctype="multipart/form-data"
                              style="padding: 10px">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                            <input type="hidden" name="step" value="step2"/>
                            <div class="mb-3">
                                <label for="marchandise">Designation de marchandises / MP</label>
                                <input type="text" t-attf-class="form-control form-control-sm"
                                       id="marchandise" name="marchandise" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="fournisseur">Fournisseur</label>
                                <input type="text" t-attf-class="form-control form-control-sm"
                                       id="fournisseur" name="fournisseur" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="payment">Mode de paiement</label>
                                <t t-foreach="payment_types" t-as="payment">
                                    <div class="form-check">
                                        <input type="checkbox" class="form-check-input"
                                               t-att-id="'payment_' + str(payment.id)"
                                               t-att-name="'payment_' + str(payment.id)"
                                               t-att-value="payment.id"/>
                                        <label class="form-check-label" t-att-for="'payment_' + str(payment.id)">
                                            <t t-esc="payment.name"/>
                                        </label>
                                    </div>
                                </t>
                            </div>
                            <div class="mb-3">
                                <label for="delai">Délai de paiement (en jours)</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="delai" name="delai" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="montant">Montant prévisionnel</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="montant" name="montant" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="programme_importation">Mois prév. De lancement</label>
                                <input type="month" t-attf-class="form-control form-control-sm"
                                       id="programme_importation" name="programme_importation" required="required"/>
                            </div>
                            <button type="submit" class="btn btn-secondary">Ajouter</button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <!-- Add any additional buttons or actions here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="createPlanModal" tabindex="-1" aria-labelledby="createPlanModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createPlanModalLabel">Ajouter une ligne</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form role="form" action="/create/plan" method="POST" enctype="multipart/form-data"
                              style="padding: 10px">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                            <input type="hidden" name="step" value="step2"/>
                            <div class="mb-3">
                                <label for="type_marche">Type de marché</label>
                                <select name="type_marche" id="type_marche" class="form-control link-style">
                                    <t t-foreach="type_marches" t-as="type_marche">
                                        <option t-att-value="type_marche.id">
                                            <t t-esc="type_marche.name" t-att-value="type_marche.id"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="client">Client</label>
                                <input type="text" t-attf-class="form-control form-control-sm"
                                       id="client" name="client" required="required"/>
                            </div>

                            <div class="mb-3">
                                <label for="dom_bancaire">Dom. Bancaire</label>
                                <select name="dom_bancaire" id="dom_bancaire" class="form-control link-style">
                                    <t t-foreach="banques" t-as="dom_bancaire">
                                        <option t-att-value="dom_bancaire.id">
                                            <t t-esc="dom_bancaire.name" t-att-value="dom_bancaire.id"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="natissement">Natissement</label>
                                <select name="natissement" id="natissement" class="form-control link-style">
                                    <t t-foreach="answers" t-as="natissement">
                                        <option t-att-value="natissement[0]">
                                            <t t-esc="natissement[1]" t-att-value="natissement[0]"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="montant">Montant H.T DA</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="montant" name="montant" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="objet">Objet du marché</label>
                                <input type="text" t-attf-class="form-control form-control-sm"
                                       id="objet" name="objet" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="date_obs">Date ODS</label>
                                <input type="date" t-attf-class="form-control form-control-sm"
                                       id="date_obs" name="date_obs" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="delai">Délai d`excution (en jours)</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="delai" name="delai" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="taux">Taux d`avancement</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="taux" name="taux" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="montant_facture">Montant facturé H.T</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="montant_facture" name="montant_facture" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="montant_encaisse">Montant encaissé H.T</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="montant_encaisse" name="montant_encaisse" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="montant_fact_no_encaisse">Montant facturé non-encaissé H.T</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="montant_fact_no_encaisse" name="montant_fact_no_encaisse"
                                       required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="montant_no_fact_realise">Montant réalisé non-facturé H.T</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="montant_no_fact_realise" name="montant_no_fact_realise" required="required"/>
                            </div>
                            <button type="submit" class="btn btn-secondary">Ajouter</button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <!-- Add any additional buttons or actions here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="createFinancementModal" tabindex="-1" aria-labelledby="createFinancementModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createFinancementModalLabel">Ajouter une ligne</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form role="form" action="/create/financement" method="POST" enctype="multipart/form-data"
                              style="padding: 10px">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                            <input type="hidden" name="step" value="step2"/>
                            <div class="mb-3">
                                <label for="type_fin">Type de financement</label>
                                <select name="type_fin" id="type_fin" class="form-control link-style">
                                    <t t-foreach="fin_types" t-as="type_fin">
                                        <option t-att-value="type_fin.id">
                                            <t t-esc="type_fin.name" t-att-value="type_fin.id"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="montant">Montant</label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="montant" name="montant" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="utilisation">Utilisation
                                </label>
                                <input type="text" t-attf-class="form-control form-control-sm"
                                       id="utilisation" name="utilisation" required="required"/>
                            </div>
                            <button type="submit" class="btn btn-secondary">Ajouter</button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <!-- Add any additional buttons or actions here -->
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="createFinancementRenModal" tabindex="-1" aria-labelledby="createFinancementRenModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="createFinancementRenModalLabel">Ajouter une ligne</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form role="form" action="/create/financement" method="POST" enctype="multipart/form-data"
                              style="padding: 10px">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <input type="hidden" name="opportunity_id" t-att-value="opportunity_id"/>
                            <input type="hidden" name="step" value="step2"/>
                            <div class="mb-3">
                                <label for="type_fin">Type de financement</label>
                                <select name="type_fin" id="type_fin" class="form-control link-style">
                                    <t t-foreach="fin_types" t-as="type_fin">
                                        <option t-att-value="type_fin.id">
                                            <t t-esc="type_fin.name" t-att-value="type_fin.id"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="autorisation_actuel">Autorisation actuelle</label>
                                <input type="text" t-attf-class="form-control form-control-sm"
                                       id="autorisation_actuel" name="autorisation_actuel" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="validite">Validité de la ligne
                                </label>
                                <input type="date" t-attf-class="form-control form-control-sm"
                                       id="validite" name="validite" required="required"/>
                            </div>
                            <div class="mb-3">
                                <label for="new_plafond">Plafond demandé
                                </label>
                                <input type="number" t-attf-class="form-control form-control-sm"
                                       id="new_plafond" name="new_plafond" required="required"/>
                            </div>
                            <button type="submit" class="btn btn-secondary">Ajouter</button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <!-- Add any additional buttons or actions here -->
                    </div>
                </div>
            </div>
        </div>

    </template>

    <record id="request_thanks" model="website.page">
        <field name="name">Merci</field>
        <field name="type">qweb</field>
        <field name="url">/demande-thank-you</field>
        <field name="website_published">True</field>
        <field name="key">crm_portal.request_thanks</field>
        <field name="arch" type="xml">
            <t name="thanks" t-name="crm_portal.request_thanks">
                <t t-call="website.layout">
                    <div id="wrap">
                        <div class="container">
                            <h1>Merci</h1>
                            <div class="row">
                                <div class="col-lg-8">
                                    <div class="alert alert-success" role="status">
                                        Votre demande est enregistré avec succès
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </field>
    </record>
</odoo>